import json
from time import sleep
from tqdm import tqdm

data = ""
data_json_path = "Pentesting/WebScan/Input/settings.json"

      

      
#############################
#                           #
#  Reading Settings file    #
#                           #
#############################


def LoadScan():   
     with open(data_json_path, "r") as json_file:
            data = json.load(json_file)
            dataScanState = data.get("DataScan", "")
            return dataScanState
             
def LoadCertificate():
      with open(data_json_path, "r") as json_file:
            data = json.load(json_file)
            dataCertificateState = data.get("CertificateScan", "")
            return dataCertificateState
      
def PreviousData():
      with open(data_json_path, "r") as json_file:
            data = json.load(json_file)
            previousData = data.get("ClearPreviousOutputs", "")
            return previousData
      
def LoadService():
      with open(data_json_path, "r") as json_file:
            data = json.load(json_file)
            servicestate = data.get("ServiceScan", "")
            return servicestate

def LoadRobot():
      with open(data_json_path, "r") as json_file:
            data = json.load(json_file)
            robotstate = data.get("RobotScan", "")
            return robotstate

def LoadDNS():
      with open(data_json_path, "r") as json_file:
            data = json.load(json_file)
            dnsstate = data.get("DnsScan", "")
            return dnsstate

def LoadGobuster():
      with open(data_json_path, "r") as json_file:
            data = json.load(json_file)
            gobusterstate = data.get("GobusterScan", "")
            return gobusterstate
      

#############################
#                           #
#       Return values       #
#                           #
#############################
      

def load_settings():
        with tqdm(total=100, desc=f"Loading settings") as pbar:
            for i in range(100):
                pbar.update(1)
                sleep(0.12)

        global scanState
        global certificateState
        global previousDataState
        global serviceState
        global robotState
        global gobusterState
        global dnsState
        
        serviceState = LoadService()
        previousDataState = PreviousData()
        scanState = LoadScan()
        certificateState = LoadCertificate()
        robotState = LoadRobot()
        gobusterState = LoadGobuster()
        dnsState = LoadDNS()
        
        

        
        

