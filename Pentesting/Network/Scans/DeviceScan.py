import nmap
import json
from tqdm import tqdm
from time import sleep
import Pentesting.ModuleTools as Module



json_file = "Output/devices.json"


#############################
#                           #
#  Device scan of network   #
#                           #
#############################
def StartScan(ip_addr, subnet):

    Module.clean()
    Module.line()
    print(f"\nDevice scan will start on: {ip_addr}/{subnet}\n")
    Module.line()

    device_scan = nmap.PortScanner()
    device = device_scan.scan(f"{ip_addr}/{subnet}", arguments='-sn', sudo=True)
    print(device)
    with open(json_file, "w") as file:
        json.dump(device, file, indent=8)

    
