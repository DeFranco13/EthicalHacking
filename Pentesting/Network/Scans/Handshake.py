import os
import json

wifi_txt = "Network/Output/Wifi.txt"
wifi_json = "Network/Output/Wifi.json"

def GetBSSID(ssid):
    if not os.path.exists(wifi_txt):
        with open(wifi_json, "r") as file:
            data = json.load(file)
        for ssid in data:
            return data[ssid].get("BSSID","")
        
    elif not os.path.exists(wifi_json):
        with open(wifi_txt, "r") as file:
            lines = file.readlines()
        for line in lines:
            if ssid in line:
                parts = line.split()
                return parts[1]
            
def GetCHAN(ssid):
    if not os.path.exists(wifi_txt):
        with open(wifi_json, "r") as file:
            data = json.load(file)
        for ssid in data:
            return data[ssid].get("CHANNEL","")
        
    elif not os.path.exists(wifi_json):
        with open(wifi_txt, "r") as file:
            lines = file.readlines()
        for line in lines:
            if ssid in line:
                parts = line.split()
                return parts[3]
            
def GetHandshake(bssid, ):
    os.popen(f"airodump-ng -c ").read()

def Start():
    if not os.path.exists(wifi_txt):
        if not os.path.exists(wifi_json):
            print("No SSDID'S to read!")
        else:
            with open(wifi_json, "r") as file:
                data = json.load(file)
                print(data)

                bssid = input("Type your chosen SSID: ")
                GetHandshake(GetBSSID(ssid),GetCHAN(ssid))
                
    
    elif not os.path.exists(wifi_json):
        if not os.path.exists(wifi_txt):
            print("No SSID'S to read!")
        else:
            with open(wifi_txt, "r") as file:
                data = file.read()
                print(data)

                ssid = input("Type your chosen SSID: ")
                GetHandshake(GetBSSID(ssid), GetCHAN(ssid))
                
                
    