import sys
import requests
import json
import time

Phone_txt = "Pentesting/Network/Output/Phone.txt"
class config:
    key = "a92d6963f9d077f844b11a9ea264579c"



def ScanPhone(number):
   
        api = "http://apilayer.net/api/validate?access_key=" + config.key + "&number=" + number + "&country_code=&format=1"
        output = requests.get(api)
        content = output.text
        obj = json.loads(content)
        country_code = obj['country_code']
        country_name = obj['country_name']
        location = obj['location']
        carrier = obj['carrier']
        line_type = obj['line_type']

        with open(Phone_txt, "w") as output_file:
            output_file.write("[+] Phone number information gathering\n")
            output_file.write("--------------------------------------\n")
            time.sleep(0.2)

            if country_code == "":
                output_file.write(" - Getting Country        [ FAILED ] \n")
            else:
                output_file.write(" - Getting Country        [ OK ]\n")

            time.sleep(0.2)
            if country_name == "":
                output_file.write(" - Getting Country Name   [ FAILED ]\n")
            else:
                output_file.write(" - Getting Country Name   [ OK ]\n")

            time.sleep(0.2)
            if location == "":
                output_file.write(" - Getting Location       [ FAILED ]\n")
            else:
                output_file.write(" - Getting Location       [ OK ]\n")

            time.sleep(0.2)
            if carrier == "":
                output_file.write(" - Getting Carrier        [ FAILED ]\n")
            else:
                output_file.write(" - Getting Carrier        [ OK ]\n")

            time.sleep(0.2)
            if line_type is None:
                output_file.write(" - Getting Device         [ FAILED ]\n")
            else:
                output_file.write(" - Getting Device         [ OK ]\n")

            output_file.write("\n[+] Information Output\n")
            output_file.write("--------------------------------------\n")
            output_file.write(" - Phone number: " + str(number) + "\n")
            output_file.write(" - Country: " + str(country_code) + "\n")
            output_file.write(" - Country Name: " + str(country_name) + "\n")
            output_file.write(" - Location: " + str(location) + "\n")
            output_file.write(" - Carrier: " + str(carrier) + "\n")
            output_file.write(" - Device: " + str(line_type) + "\n")

   

		
	
                                                